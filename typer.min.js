!function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(function(){return t()}):e.typer=t()}(this,function(){"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(t,r){function i(e){return{}.toString.call(e).slice(8,-1)}function o(e){var t=i(e);if("html"!==t.slice(0,4).toLowerCase()&&"String"!==t)throw"You need to provide a string selector, such as '.some-class', or an html element.";return t}function u(e){var t=i(e);if(void 0===e)return D.speedSet?r:70;if("Number"===t&&!isNaN(e))return e;if("Object"===t){var n=e.hasOwnProperty("min"),o=e.hasOwnProperty("max"),u=e.hasOwnProperty("speed");if(u&&!isNaN(e.speed))return e.speed;if(n&&o&&e.min<e.max)return e;if(!Object.keys(e).length&&D.speedSet)return r;if(!n&&!o&&!u)return r}throw"You have provided an invalid value for speed."}function c(e,n){D.style&&D.style.remove(),D.newDiv&&a(),t.removeAttribute("data-typer"),A.removeEventListener("killTyper",k),D.newDiv&&D.newDiv.classList.add("white-space"),D.newDiv="","function"==typeof e?e(t):"function"==typeof n&&n(t),!0!==e&&!0!==n||A.dispatchEvent(new Event("typerFinished"))}function a(){["typer","cursor-block","cursor-soft","cursor-hard","no-cursor"].forEach(function(e){D.newDiv.classList.remove(e)})}function l(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function s(e,t){D.style=document.createElement("style"),D.style.appendChild(document.createTextNode("")),document.head.appendChild(D.style);var n=document.styleSheets[document.styleSheets.length-1];"insertRule"in n?n.insertRule(e+"{"+t+"}",0):n.addRule(e,t)}function d(t,n,r){function o(){var n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments[1],a=r.container,l=!o&&("String"===i(a)?document.querySelector(a).textContent:a.textContent);return n={},e(n,t,o||l),e(n,"totalTime",r.totalTime),e(n,"speed",u(r)),e(n,"html",!1!==r.html),e(n,"element",c?r.element:null),n}var c="line"===t,a="continue"===t;if(n||r)if("Object"===i(n))(c||a&&n.container)&&D.push(o(n));else if(isNaN(r))D.push(o(r,n));else{var l;D.push((l={},e(l,t,n),e(l,"speed",u(r)),e(l,"html",!0),l))}else c&&D.push({line:1})}function f(){if(D.item>=0||(D.item=0),D.item===D.length)return A.removeEventListener("killTyper",k);D.ks||(D.ks=!0,A.addEventListener("killTyper",k)),D.cursor||(D.cursor="cursor-soft"),D.type=setInterval(function(){if(!D.length)return clearInterval(D.type);var e=D[D.item];e.line?v(e):e.continue?h(e):e.pause?y(e):e.emit?g(e):e.listen?w(e):e.back?N(e):e.empty?b():e.run?T(e):e.end&&E()},0)}function v(e){clearInterval(D.type),D.newDiv&&(a(),D.newDiv.classList.add("white-space"),D.newDiv.innerHTML||(D.newDiv.innerHTML=" "));var n=document.createElement(e.element||"div");if(n.setAttribute("data-typer-child",D.uuid),n.className=D.cursor,n.classList.add("typer"),n.classList.add("white-space"),t.appendChild(n),D.newDiv=n,1===e.line)return D.item++,f();m(e)}function h(e){clearInterval(D.type),m(e)}function p(e,t,n){var r="Object"===i(e)?l(e.min,e.max):e;D.iterator=setTimeout(function(){return t(n)},r)}function m(e){function t(e,n){var r=[];e=Array.from(e);for(var i=0;i<e.length;i++){var o=e[i],u=o.nodeName;"#text"===u?r.push({parent:n,content:o.textContent}):o.childNodes.length?function(){var e=document.createElement(u);Array.from(o.attributes).forEach(function(t){e.setAttribute(t.name,t.value)}),r.push({parent:n,newNode:e}),r=r.concat(t(o.childNodes,e))}():D.voids.includes(u)&&r.push({parent:n,voidNode:o})}return r}function n(){return clearInterval(D.iterator),D.item++,f()}var r=e.line||e.continue,o=document.createElement("div");if(Array.isArray(r))return function(t){function i(){var e=r[u++];o.textContent=e,D.newDiv.innerHTML+=t?e:o.innerHTML,u===r.length?n():p(c,i)}var u=0,c=e.totalTime?e.totalTime/r.length:e.speed;p(c,i)}(e.html);o.innerHTML=r,e.html?function(){function r(){if(!a)return n();a.content?(a.parent.innerHTML+=a.content[c++],c===a.content.length&&(c=0,a=i[u++])):(a.parent.appendChild(a.voidNode||a.newNode),a=i[u++]),p(l,r)}var i=t(o.childNodes,D.newDiv),u=0,c=0,a=i[u++],l=e.totalTime?e.totalTime/a.content.length:e.speed;p(l,r)}():function(){function t(){if(u===r.length)return n();var e=r[u];"String"!==i(r)&&(o.textContent=e,e=o.innerHTML),D.newDiv.innerHTML+=e,u++,p(c,t)}var u=0,c=e.totalTime?e.totalTime/r.length:e.speed;p(c,t)}()}function y(e){clearInterval(D.type),D.pause=setTimeout(function(){D.item++,f()},e.pause)}function g(e){clearInterval(D.type),e.el.dispatchEvent(new Event(e.emit)),D.item++,f()}function w(e){function t(n){e.el.removeEventListener(n.type,t),D.killed||(D.item++,f())}clearInterval(D.type),e.el.addEventListener(e.listen,t),M={el:e.el,type:e.listen,fxn:t}}function N(e){function t(e){var t=0,r=n(e||D.newDiv).reverse();return function(){var n=r[0];D.voids.includes(n.nodeName)?(n.remove(),r.shift()):(n.textContent=n.textContent.slice(0,-1),n.length||r.shift()),e||++t===u&&(clearInterval(D.goBack),i(D.newDiv),D.item++,f())}}function n(e){var t=[],r=Array.from(e.childNodes);return r.length?(r.forEach(function(e){e.childNodes.length?t=t.concat(n(e)):t.push(e)}),t):t}function i(e){Array.from(e.childNodes).forEach(function(e){D.voids.includes(e.nodeName)||(e.childNodes.length&&i(e),"#text"===e.nodeName||e.innerHTML.length||e.remove(),"#text"!==e.nodeName||e.length||e.remove())})}function o(e){var t=0;return Array.from(e.childNodes).forEach(function(e){D.voids.includes(e.nodeName)&&t++,e.childNodes.length&&(t+=o(e))}),t}var u=e.back,c=e.speed;if(clearInterval(D.type),!D.newDiv||!D.newDiv.textContent)return D.item++,f();var a=o(D.newDiv),l=D.newDiv.textContent.length;if("empty"===u){if(!c||c>=l)D.newDiv.innerHTML="";else{var s=D.newDiv.cloneNode(!0),d=t(s);c<0&&(c+=l);for(var v=0;v<c;v++)d();i(s),D.newDiv.innerHTML=s.innerHTML}return D.item++,f()}u>l+a&&(u="all"),"all"===u&&(u=l+a),u<0&&(u=l+a- -1*u),D.goBack=setInterval(t(),c||r)}function b(){t.innerHTML="",v({line:1})}function T(e){var n=e.run;clearInterval(D.type),n(t),D.item++,f()}function E(){clearInterval(D.type),D.cb()}function k(){return M.el&&M.el.removeEventListener(M.type,M.fxn),clearInterval(D.iterator),clearInterval(D.goBack),clearTimeout(D.pause),D.length=0,c(),L("kill")}function L(e){function t(e){return console.warn(n,e),x}var n='WARNING: you tried to call ".%s" after ".'+e+'" has already been called.\nThe public API has been nullified.';return Object.keys(x).forEach(function(n){"kill"===n&&"end"===e||(x[n]=t.bind(null,n))}),"kill"===e&&(D.killed&&t(),D.killed=!0),x}var D=[],A=document.body,M={};if("String"===o(t)&&(t=document.querySelector(t)),t.getAttribute("data-typer"))throw"You've already called Typer on this element.";r=u(r),D.speedSet=!0,D.voids=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"],D.classNames=["typer","cursor-block","cursor-soft","cursor-hard","no-cursor"],D.uuid=n(),t.setAttribute("data-typer",D.uuid);var x={cursor:function(e){if(D.cursorRan)return console.warn('You can only call ".cursor" once.'),this;if(D.cursorRan=!0,void 0===e&&(e=!0),!1===e)return D.cursor="no-cursor",this;var t=e,n=t.color,r=t.blink,i=t.block,o=[],u='[data-typer="'+D.uuid+'"]';return n&&s(u+" .typer::after","background-color:"+n),o.push("cursor-"+("hard"===r?"hard":"soft")),!0===i&&o.push("cursor-block"),D.cursor=o.join(" "),this},line:function(e,t){return d("line",e,t),D.typing||(D.typing=!0,f()),this},continue:function(e,t){return d("continue",e,t),this},pause:function(e){return D.push({pause:+e||500}),this},emit:function(e,t){return t?"String"===o(t)&&(t=document.querySelector(t)):t=A,D.push({emit:e,el:t}),this},listen:function(e,t){return t?"String"===o(t)&&(t=document.querySelector(t)):t=A,D.push({listen:e,el:t}),this},back:function(e,t){return D.push({back:e,speed:t}),this},empty:function(){return D.push({empty:!0}),this},run:function(e){return D.push({run:e}),this},end:function(e,t){return D.push({end:!0}),D.cb=function(){return c(e,t)},L("end")},kill:k};return x}var n=function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)};return t});